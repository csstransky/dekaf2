#include "catch.hpp"

#include <kpipereader.h>
#include <kstring.h>

using namespace dekaf2;
TEST_CASE("KPipeReader")
{

	SECTION("KPipe normal Open and Close")
	{
//		INFO("normal_open_close_test::Start:");

//		KPipeReader   pipe;

//		// open the pipe
//		CHECK(pipe.Open("ls -al $dekaf/kpipe.cpp | grep kpipe.cpp | wc -l 2>&1"));

//		KString sCurrentLine;

//		bool output = pipe.ReadLine(sCurrentLine);
//		//std::cout << "output is: " << output << std::endl;
//		CHECK(output);
//		//REQUIRE("1\n" == sCurrentLine);
//		CHECK("1\n" == sCurrentLine);


//		//REQUIRE(0 == pipe.Close());

		INFO("normal_open_close_test::Done:");
	}

}
